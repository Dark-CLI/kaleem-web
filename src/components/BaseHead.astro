---
// Import the global.css file here so that it is included on
// all pages through the use of the <BaseHead /> component.
import '../styles/global.css';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

interface Props {
	title?: string;
	description?: string;
	image?: string;
}

const { 
	title = SITE_TITLE, 
	description = SITE_DESCRIPTION, 
	image = '/images/kaleem-logo/cover.png' 
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

// Handle i18n URLs
const { currentLocale, url } = Astro;
const { pathname } = url;

const getPath = (locale: string) => {
  if (locale === 'en') {
    return pathname.startsWith('/ar') ? pathname.replace('/ar', '') : pathname;
  }
  return `/ar${pathname.startsWith('/ar') ? '' : pathname}`;
};

const enURL = new URL(getPath('en'), Astro.site).href;
const arURL = new URL(getPath('ar'), Astro.site).href;

const businessSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Kaleem",
  "alternateName": ["Kaleem Company", "Kaleem Iraqi Company", "Kaleem Smart Home", "Kaleem Voice Assistant"],
  "description": "Kaleem is the leading smart home company in Iraq, specializing in AI voice assistant technology and smart house automation for Basra, Baghdad, and across Iraq.",
  "url": Astro.site,
  "logo": new URL('/images/kaleem-logo/default.png', Astro.site).href,
  "foundingDate": "2024",
  "founder": {
    "@type": "Person",
    "name": "Kaleem Team"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+964-XXX-XXXXXXX", // Add your phone number
    "contactType": "Customer Service",
    "areaServed": "Iraq"
  },
  "areaServed": [
    {
      "@type": "City",
      "name": "Basra",
      "alternateName": "Smart Home Basra"
    },
    {
      "@type": "City",
      "name": "Baghdad"
    },
    {
      "@type": "Country",
      "name": "Iraq",
      "alternateName": "Smart Home Iraq"
    }
  ],
  "knowsAbout": [
    "Smart Home Technology",
    "Voice Assistant",
    "Home Automation",
    "AI Technology",
    "Smart House Solutions",
    "Iraqi Technology"
  ],
  "sameAs": [
    // Add links to your social media profiles here
    // "https://www.facebook.com/YourPage",
    // "https://www.twitter.com/YourHandle"
  ]
};
---

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<meta name="generator" content={Astro.generator} />

<!-- SEO -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="keywords" content="kaleem, kaleem smart house, kaleem iraq, kaleem smart home, kaleem company, kaleem iraqi company, kaleem basra, smart home basra, smart home iraq, kaleem voice assistant, voice assistant iraq, smart house iraq, home automation basra, kaleem technology" />
<meta name="author" content="Kaleem" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href={canonicalURL} />

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- i18n (hreflang) -->
<link rel="alternate" hreflang="en" href={enURL} />
<link rel="alternate" hreflang="ar" href={arURL} />
<link rel="alternate" hreflang="x-default" href={enURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={Astro.url} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={new URL(image, Astro.site)} />
<meta property="og:site_name" content={SITE_TITLE} />
<meta property="og:locale" content={currentLocale} />
<meta property="og:locale:alternate" content={currentLocale === 'en' ? 'ar_AR' : 'en_US'} />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={Astro.url} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={new URL(image, Astro.site)} />

<!-- Structured Data (Schema.org) -->
<script type="application/ld+json" set:html={JSON.stringify(businessSchema)} />
